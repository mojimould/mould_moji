%!TEX root = ../RfCPN.tex


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% FOR STYLE OF TOC %%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\RedeclareSectionCommand[
%  tocindent=0em,
%  tocnumwidth=4.25em
%]{part}
%\addtokomafont{partentry}{\def\autodot{}}
\setcounter{tocdepth}{3}
\renewcommand\contentsname{\texorpdfstring{\hbox to 2em{目次}}{目次}}
%%%%% FOR PART %%%%%
\patchcmd{\l@part}{\begingroup}{\begingroup\begingroup\tikzset{every node/.style={rectangle,fill=blue!20,rounded corners}}}{}{}
\patchcmd{\l@part}{\endgroup}{\endgroup\endgroup}{}{}
\DeclareTOCStyleEntry[
  indent=0em, % エントリのインデントを調整
  numwidth=2.35em, % エントリ番号の幅を調整
  pagenumberwidth=19.305pt
]{tocline}{part}
%%%%% FOR CHAPTER %%%%%
\DeclareTOCStyleEntry[
  level=\chaptertocdepth,
  indent=0.85em, % エントリのインデントを調整
  numwidth=1.5em, % エントリ番号の幅を調整
  pagenumberwidth=17.968pt
]{tocline}{chapter}
%%%%% FOR SECTION %%%%%
\DeclareTOCStyleEntry[
  level=\sectiontocdepth,
  indent=2.35em, % エントリのインデントを調整
  numwidth=2.71em % エントリ番号の幅を調整
]{tocline}{section}
%%%%% FOR SUBSECTION %%%%%
\DeclareTOCStyleEntry[
  indent=5.06em, % エントリのインデントを調整
  numwidth=3.9em % エントリ番号の幅を調整
]{tocline}{subsection}
%%%%% FOR SUBSUBSECTION %%%%%
\DeclareTOCStyleEntry[
  indent=8.96em, % エントリのインデントを調整
  numwidth=4.4em % エントリ番号の幅を調整
]{tocline}{subsubsection}
%%%%% FOR TABLE %%%%%
\titlecontents{table}[2.35em] % 左インデント
{\addvspace{0pt}} % 上部の垂直スペースとフォーマット
{\contentslabel{1.5em}} % ラベルとテキストの間のスペース
{\hspace*{-1.5em}} % ラベルなしの場合のスペース
{\titlerule*[0.5pc]{.}\contentspage} % ページ番号前のリーダーとページ番号
%%%%% FOR FIGURE %%%%%
\titlecontents{figure}[2.0em] % 左インデント
{\addvspace{0pt}} % 上部の垂直スペースとフォーマット
{\contentslabel{1.5em}} % ラベルとテキストの間のスペース
{\hspace*{-1.5em}} % ラベルなしの場合のスペース
{\titlerule*[0.5pc]{.}\contentspage} % ページ番号前のリーダーとページ番号
%%%%% FOR Colmun %%%%%
%\titlecontents{loColmun}[2.35em] % 左インデント
%{\addvspace{0pt}} % 上部の垂直スペースとフォーマット
%{\contentslabel{1.5em}} % ラベルとテキストの間のスペース
%{\hspace*{-1.5em}} % ラベルなしの場合のスペース
%{\titlerule*[0.5pc]{.}\contentspage} % ページ番号前のリーダーとページ番号
%%%%% STYLE OF LIST FOR APPENDIX %%%%%
\AtBeginEnvironment{appendices}{%
  \clearrightpage%
  \@appendixtrue%
  \patchcmd{\part}{\newpage}{\relax}{}{}%
  \pretocmd{\part}{\addtocontents{toc}{\protect\tcbline*}}{}{}{}% add page break before parts, except part 1
}
\AtEndEnvironment{appendices}{\clearrightpage}
\AfterEndEnvironment{appendices}{%
  \patchcmd{\part}{\tocAPartSeparateline}{\relax}{}{}%
  \@appendixfalse%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% FOR STYLE OF OTHER LISTS %%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%% FOR STYLE OF LOT %%%%%%%%%%%%%%%%%%%%%%%
\renewcommand\listtablename{\texorpdfstring{\hbox to 3em{表目次}}{表目次}}
\renewcommand{\tableautorefname}{\tablename}
%\let\l@table\l@section
%\renewcommand*\l@table{\@dottedtocline{1}{0.0em}{2.35em}}

%%%%% FOR STYLE OF LOF %%%%%%%%%%%%%%%%%%%%%%%
\renewcommand\listfigurename{\texorpdfstring{\hbox to 3em{図目次}}{図目次}}
\renewcommand{\figureautorefname}{\figurename}
%\let\l@figure\l@section
%\renewcommand*\l@figure{\@dottedtocline{1}{0.0em}{2.35em}}
%\AtBeginDocument{\renewcommand{\thefigure}{}}

%%%%% FOR STYLE OF LOP %%%%%%%%%%%%%%%%%%%%%%%
\renewcommand\listoflopname{\texorpdfstring{\hbox to 3em{大目次}}{大目次}}

%%%%% FOR STYLE OF LOCODE %%%%%%%%%%%%%%%%%
\renewcommand{\listoflocodename}{コード 目次}

%%%%% FOR STYLE OF LOC %%%%%%%%%%%%%%%%%%%%%%%
\renewcommand\listofloColumnname{\Columnname 一覧}
\renewcommand{\loColumnname}{{\Columnname}}

%%%%% FOR STYLE OF INDEX %%%%%%%%%%%%%%%%%%%%%
\renewcommand{\indexname}{\texorpdfstring{\hbox to 2em{索引}}{索引}}
\renewcommand\indexpagestyle{plainheadback}
\newcommand\symbolindexname{記号・数字}

%%%%% FOR STYLE OF BIBLATEX %%%%%%%%%%%%%%%%%%
\DeclareLanguageMapping{japanese}{english}
%\DefineBibliographyStrings{english}{in={in}}
\renewcommand{\bibname}{\texorpdfstring{\hbox to 4em{文献一覧}}{文献一覧}}
\newcommand{\referencesname}{参考文献}
\newcommand{\citedworksname}{参照文献}
\newcommand{\Articlename}{論文}
\newcommand{\Bookname}{書籍}
\newcommand{\OnlineSourcename}{ウェブサイト}
\newcommand{\Manualname}{マニュアル}
\DeclareFieldFormat{title}{``#1"}
\DeclareFieldFormat{urldate}{(urlseen~\thefield{urlyear}/\ifnum\thefield{urlmonth}<10 0\fi\thefield{urlmonth})}
\ExecuteBibliographyOptions{
  language=auto,
  autolang=other,
  sorting=none,
  defernumbers=false,
  hyperref=true,
  block=nbpar,
  subentry=true,
  citecounter=true,
}
\appto\bibfont{\footnotesize\setstretch{1.1}}
\DeclareFieldFormat{labelnumberwidth}{\mkbibbrackets{#1}\hspace{-6pt}}
\DeclareFieldFormat{date}{%
  \thefield{year}%
  \iffieldundef{month}{}{/}%
  \iffieldundef{month}{}{\two@digits{\thefield{month}}}%
  \iffieldundef{day}{}{/}%
  \iffieldundef{day}{}{\two@digits{\thefield{day}}}%
}
\defbibheading{subsubbibintoc}{\subsection*{#1}\addsubsectiontocentry{}{#1}}
