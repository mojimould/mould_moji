%
O230002 (for BD dimples measurement)
(level 3: measurement dimple)
(J > 0: Y+, J < 0: Y-)

#750=#5002
(#750= current work block end Y)

IF[#05EQ#0]GOTO800
IF[#05EQ0]GOTO800
(if J = 0 or empty, to N800)

IF[#1004EQ1]GOTO001
M117 (if the sensor is off, turn on)
G04 X1. (wait 1.0s)

N001
IF[#05LT0]GOTO002
(if J < 0 to N002)
#33=1 (if J > 0, #33=1)
GOTO003
N002
#33=-1 (if J < 0, #33=-1)

N003
G91 G31 Y[#33*[#603+#604]] F#514
(skip Y+ or Y-: #603+#604, speed #514)
#751=#5002+#503+#33*[-#501+#512]
(#751= block end Y + hosei probe etc)
G90 G01 Y#750 F3600
(G90 G01 Y: to start point)
GOTO999 (to N999)

N800
G65 P910002 (sensor OFF)
#3000=121 (Argument Is Not Assigned)

N999 M99

(Used Variables and Programs)

(Local variables)

(as received arguments)
(#05:J: +:Y+direction, -:Y-direction)

(as LHS)
(#33)


(Common variables)
(as RHS)
(#501: hosei: touch sensor signal delay)
(#503: hosei: probe center Y)
(#512: probe radius)
(#514: default skip speed)
(#603, #604)
(as LHS)
(#750, #751)


(System variables)
(#1004: 1: sensor on, 0: off)
(#3000: alarm)
(#5002: current work block end point Y)


(Subprograms)
(O910002)


(Used in other programs)
(#751)
%