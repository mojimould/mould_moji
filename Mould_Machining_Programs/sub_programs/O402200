%
O402200
(Corner R or C, ar HidariMawari 1shuu)

N001
IF[#24EQ#0]GOTO800
IF[#24LT10]GOTO800
IF[#25EQ#0]GOTO800
IF[#25LT10]GOTO800
(if X < 10 or #0, go to N800)
(if Y < 10 or #0, go to N800)

N002 (for F)
IF[#09NE#0]GOTO003
#09=500.0
N003 (for E)
IF[#08NE#0]GOTO004
#08=400.0
N004 (for S)
IF[#19NE#0]GOTO005
#19=930.0
(default: F=500.)
(default: E=400.)
(default: S=930.)

N005
IF[#09LT10]GOTO800
IF[#08LT10]GOTO800
IF[#19LE200]GOTO800
(if F < 10, go to N800)
(if E < 10, go to N800)
(if S <= 200, go to N800)

N006
IF[#01EQ1]GOTO007
IF[#01EQ2]GOTO007
IF[#01EQ3]GOTO010
IF[#01EQ4]GOTO010
GOTO800

N007
IF[#18EQ#0]GOTO008
IF[#03NE#0]GOTO800
(if either R and C are not #0, go to N800)
#33=#18
GOTO009
(if R is not #0 and C=#0, go to N004)
N008
IF[#03EQ#0]GOTO800
(if both R and C are #0, go to N800)
#33=#03
(if C is not #0 and R=#0, go to N004)

N009
IF[#33LT1]GOTO800
IF[#33GE[[#24+#25-ABS[#24-#25]]/8]]GOTO800
(if #33 < 1, go to N800)
(if #33 < 1 or #33 >= min[X/4, Y/4], go to N800)




(kokokara G00)

N010
IF[#01NE1]GOTO021


N020 (for R)
G91 G01 X-[#30+#32*2-#33] F#09
(a: X-)
G91 G03 X-#33 Y-#33 I0 J-#33 F#08
(al corner: R#33 [0, -R] X-Y-)
G91 G01 Y-[#29-#33*2] F#09
(l:Y-)
G91 G03 X#33 Y-#33 I#33 J0 F#08
(bl corner: R#33 [R, 0] X+Y-)
G91 G01 X[#30-#33*2] F#09
(b: X+)
G91 G03 X#33 Y#33 I0 J#33 F#08
(br corner: R#33 [0, R] X+Y+)
G91 G01 Y[#29-#33*2] F#09
(r: Y+)
G91 G03 X-#33 Y#33 I-#33 J0 F#08
(ar corner: R#33 [-R, #0] X-Y+)
G91 G02 X-[#32*2] Y[#32*2] I0. J[#32*2] F#09
(G02 R[#32*2] [0, #32*2] X-Y+)
GOTO022

N021 (for C)
G91 G01 X-[#30+#32*2-#33] F#09
(a: X-)
G91 G01 X-#33 Y-#33 F#08
(al corner: C#33 X-Y-)
G91 G01 Y-[#29-#33*2] F#09
(l:Y-)
G91 G01 X#33 Y-#33 F#08
(bl corner: C#33 X+Y-)
G91 G01 X[#30-#33*2] F#09
(b: X+)
G91 G01 X#33 Y#33 F#08
(br corner: C#33 X+Y+)
G91 G01 Y[#29-#33*2] F#09
(r: Y+)
G91 G01 X-#33 Y#33 F#08
(ar corner: R#33 X-Y+)
G91 G01 X-[#32*2] Y[#32*2] F#09
(X-Y+)

N022
G90 G40 G00 X[[#30/2]+#32*3+#04] F10800
G90 G00 Y[[#29/2]+#32] F10800
G90 G01 Z[#26-#13-#23-#901009-#901010] S#19 F5400

N023
G90 G42 G01 D#07 X[[#30/2]+#32*2+#04] Y[#29/2] F5400

IF[#03NE#0]GOTO025
(if C, go to N025)

N024 (for R)
G91 G01 X-[#30+#32*2-#33] F#09
(a: X-)
G91 G03 X-#33 Y-#33 I0 J-#33 F#08
(al corner: R#33 [0, -R] X-Y-)
G91 G01 Y-[#29-#33*2] F#09
(l:Y-)
G91 G03 X#33 Y-#33 I#33 J0 F#08
(bl corner: R#33 [R, 0] X+Y-)
G91 G01 X[#30-#33*2] F#09
(b: X+)
G91 G03 X#33 Y#33 I0 J#33 F#08
(br corner: R#33 [0, R] X+Y+)
G91 G01 Y[#29-#33*2] F#09
(r: Y+)
G91 G03 X-#33 Y#33 I-#33 J0 F#08
(ar corner: R#33 [-R, #0] X-Y+)
G91 G02 X-[#32*2] Y[#32*2] I0. J[#32*2] F#09
(G02 R[#32*2] [0, #32] X-Y+)
GOTO026

N025 (for C)
G91 G01 X-[#30+#32*2-#33] F#09
(a: X-)
G91 G01 X-#33 Y-#33 F#08
(al corner: C#33 X-Y-)
G91 G01 Y-[#29-#33*2] F#09
(l:Y-)
G91 G01 X#33 Y-#33 F#08
(bl corner: C#33 X+Y-)
G91 G01 X[#30-#33*2] F#09
(b: X+)
G91 G01 X#33 Y#33 F#08
(br corner: C#33 X+Y+)
G91 G01 Y[#29-#33*2] F#09
(r: Y+)
G91 G01 X-#33 Y#33 F#08
(ar corner: R#33 X-Y+)
G91 G01 X-[#32*2] Y[#32*2] F#09
(X-Y+)

N026
M05 (shujiku kaiten off)
M09 (coolant off)

N025
G40 S200
G91 G28 Z0
GOTO999

N800
M05 (shujiku kaiten off)
M09 (coolant off)
#3000=121 (are the arguments OK?)

N999 M99

(Used Variables and Programs)

(Local variables)

(as received arguments)
(#07:D: kouguKei&Chou hosei)
(#13:M: mizoIchi)
(#18:R: corner R)
(#23:W: mizoHaba)
(#24:X: AC gaikei)
(#25:Y: BD gaikei)
(#26:Z: sai-furiwake)
(as received hidden arguments)
(#04:I: +hosei AC center)
(#08:E: speed corner R)
(#09:F: speed chokusenBu)
(#17:Q: +hosei X&Y)
(#19:S: kaitenSuu)

(as LHS)
(#29, #30, #31, #32, #33)


(Common variable)
(as RHS)
(#461, #491, #901009, #901010)


(System variables)
(#22xx: #xx kouguChou)
(#24xx: #xx kouguChouMamou)
(#3000: alarm)
%