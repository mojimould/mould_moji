%
O430000
(Mizo Corner R or C, ar HidariMawari 1shuu)

N001
IF[#07EQ#0]GOTO800
IF[#24EQ#0]GOTO800
IF[#24LT10]GOTO800
IF[#25EQ#0]GOTO800
IF[#25LT10]GOTO800
IF[#26EQ#0]GOTO800
IF[#13EQ#0]GOTO800
IF[#13LE1]GOTO800
IF[#23LT#0]GOTO800
IF[#23LE1]GOTO800
(if D = #0, go to N800)
(if X < 10 or #0, go to N800)
(if Y < 10 or #0, go to N800)
(if Z = #0, go to N800)
(if M < 1, or #0, go to N800)
(if W < 1, or #0, go to N800)

N002
IF[#01EQ1]GOTO003
IF[#01EQ2]GOTO004
IF[#01EQ3]GOTO005
IF[#01EQ4]GOTO005
GOTO800
(if A is not 1, 2, 3, 4, go to N800)

N003 (for R)
IF[#18EQ#0]GOTO800
IF[#03NE#0]GOTO800
IF[#18LT0.1]GOTO800
IF[#18GE[[#24+#25-ABS[#24-#25]]/8]]GOTO800
(if R < 0.1 or R >= min[X/4, Y/4], go to N800)
GOTO006

N004 (for C)
IF[#03EQ#0]GOTO800
IF[#18NE#0]GOTO800
IF[#03LT0.1]GOTO800
IF[#03GE[[#24+#25-ABS[#24-#25]]/8]]GOTO800
(if C < 0.1 or C >= min[X/4, Y/4], go to N800)
GOTO006

N005 (for rec or BD only)
IF[#03NE#0]GOTO800
IF[#18NE#0]GOTO800

N006
IF[#09NE#0]THEN #09=500.0
IF[#08NE#0]THEN #08=400.0
IF[#19NE#0]THEN #19=930.0
(default: F=500.)
(default: E=400.)
(default: S=930.)

N007
IF[#09LT10]GOTO800
IF[#08LT10]GOTO800
IF[#19LT200]GOTO800
(if F < 10, go to N800)
(if E < 10, go to N800)
(if S < 200, go to N800)

N008
IF[#07LT6]GOTO800
IF[#07GT10]GOTO800
IF[[#26-#13-#23-#422-#423]LE[#901011/2]]GOTO800
IF[[FIX[#07]]NE#07]GOTO800
IF[[ABS[#424]]GE[[#24+#25-ABS[#24-#25]]/8]]GOTO800
(if D < 6 or D > 10 or D is not integer, go to N800)
(if Z-M-W-#422-#423 <= #901011/2, go to N800)
(if |Q| >= min[X/4, Y/4], go to N800)
(if |I| >= min[X/4, Y/4], go to N800)

N009
#33=#[2400+#07]+#[2600+#07]
#32=[#607+#33+ABS[#607-#33]]/2
IF[#32LE1]GOTO800
(#32: max[#607, hosei kouguKei])

N010
IF[#07EQ6]THEN #31=#901105
IF[#07EQ7]THEN #31=#901107
IF[#07EQ8]THEN #31=#901109
IF[#07EQ9]THEN #31=#901111
IF[#31LE1]GOTO800
(#31: kougu Thickness)


(kokokara G00)


N011
G90 G43 G00 H#07 Z[#26+#601] F7200
G90 G00 X[[#24/2]+#32*3-#424] Y[#25/2] F10800
G42 D#07
G91 G00 X-[#32/2] F10800
G90 G01 Z[#26-#13-#422-#31] S#19 F5400

N012
M03 (shujiku kaiten on)
M08 (coolant on)

N013
G90 G01 X[[#24/2]+#32*2-#424] Y[#25/2] F5400
G65 P490005 A#01 C#03 R#18 X#24 Y#25 D#32 F#09 E#08 S#19
G90 G40 G00 X[[#24/2]+#32*3-#424] F10800

N014
IF[#425NE3]GOTO016
G90 G00 Y[#25/2] F10800
G42 D#07
G91 G00 X-[#32/2] F10800
G90 G01 Z[#26-[#13+#422+[#23+#423+#31]/2]] S#19 F5400

N015
G90 G01 X[[#24/2]+#32*2-#424] Y[#25/2] F5400
G65 P490005 A#01 C#03 R#18 X#24 Y#25 D#32 F#09 E#08 S#19
G90 G40 G00 X[[#24/2]+#32*3-#424] F10800

N016
G90 G00 Y[#25/2] F10800
G42 D#07
G91 G00 X-[#32/2] F10800
G90 G01 Z[#26-#13-#23-#422-#423] S#19 F5400

N017
G90 G01 X[[#24/2]+#32*2-#424] Y[#25/2] F5400
G65 P490005 A#01 C#03 R#18 X#24 Y#25 D#32 F#09 E#08 S#19
G90 G40 G00 X[[#24/2]+#32*3-#424] F10800

N018
M05 (shujiku kaiten off)
M09 (coolant off)

N019
G90 G40 G00 X[#24+#32*3] F10800
S200
G90 G43 G00 H#07 Z[#26+#601] F7200
G91 G28 Z0
GOTO999

N800
M05 (shujiku kaiten off)
M09 (coolant off)
#3000=121 (are the arguments OK?)

N999 M99

(Used Variables and Programs)

(Local variables)

(as received arguments)
(#01:A: key type)
(#03:C: corner C)
(#07:D: kouguKei&Chou hosei)
(#13:M: mizoIchi)
(#18:R: corner R)
(#21:U: AC gaisakuKei)
(#22:V: BD gaisakuKei)
(#23:W: mizoHaba)
(#24:X: AC mizoKei)
(#25:Y: BD mizoKei)
(#26:Z: sai-furiwake)
(as received hidden arguments)
(#08:E: speed corner R)
(#09:F: speed chokusenBu)
(#19:S: kaitenSuu)

(as LHS)
(#31, #32, #33)


(Common variable)
(as RHS)
(#422, #423, #424, #425, #601, #607, #901011, #901105, #901107, #901109, #901111)


(System variables)
(#24xx: #xx kouguKei)
(#26xx: #xx kouguKeiMamou)
(#3000: alarm)


(Subprograms)
(O490005)


(Passed arguments)
(#01, #03, #08, #09, #18, #19, #24, #25, #32)
%