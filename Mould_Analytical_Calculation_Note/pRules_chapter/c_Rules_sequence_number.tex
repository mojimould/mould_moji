%!TEX root = ../Mould_Analytical_Calculation_Note.tex



一般に、\index{シーケンスばんごう@シーケンス番号}シーケンス番号は（重複していなければ）自由に付けて問題ない。
しかしこれに一定のルールを与えておくことで、プログラムの
\begin{enumerate}
\item どの部分で何が行われているか
\item どの部分でエラーが起きているか
\item 途中から稼働する場合、どのブロックから始めればよいか
\end{enumerate}
など、作業や管理をする際に効率よく制御することが可能になる。

そこで、ここでは\index{シーケンスばんごう@シーケンス番号}シーケンス番号（\index{Nコード}Nコード）についての規則を与える。



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section 15.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{基本事項}
\begin{enumerate}[label=\Roman*), ref=\Roman*)]
\item シーケンス番号は3桁とし、0埋めする
\item プログラムの始まりのシーケンス番号は\verb|N001|とする
\item 原則として、シーケンス番号は昇順とし、特に1桁目は連番とする
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section 15.2 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{サブプログラム}
\DMname においては、原則としてサブプログラムは始めから実行されるものであり、途中の部分から実行されることはない。
そのため、\index{サブプログラム}サブプログラムについてはシーケンス番号は記述の順に（概ね\index{ブロック}ブロックごとに）連番とする。

なお、エラー検出時に関するシーケンス番号、およびプログラム終了に関するシーケンス番号については、以降で述べるメインプログラムのもの(\autoref{subsec:sequenceNerror}, \pageautoref{subsec:sequenceNprgEnd})と同様とする。



\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section 15.3 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{メインプログラム}
\DMname において、\index{メインプログラム}メインプログラム
%% footnote %%%%%%%%%%%%%%%%%%%%%
\footnote{ここでいうメインプログラムとは、下5桁が\index{ずめんばんごう@図面番号}図面番号と一致するものを指す。}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
は\index{さぎょうしゃ@作業者}作業者が実際に設定を変更したり、途中の箇所から始めたりし得る。
そのため、メインプログラムについては各作業（計測・加工）ごとにシーケンス番号を割り振ることにする。


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 15.3.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N100：計測（内面溝・逃し溝以外）}
\index{タッチセンサー}タッチセンサーを用いた計測（内面溝・逃し溝を除く）を行う工程のシーケンス番号は100番台とする。
これには以下の\index{こうてい@工程}工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[100:] 芯出し計測
\item[150:] 通り芯$X$計測
\item[160:] 通り芯$Y$計測
\end{enumerate}


%\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 15.3.2 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N200：計測（内面溝）}
\index{ないめんみぞ@内面溝}内面溝および逃し溝に関するタッチセンサーを用いた計測を行う工程のシーケンス番号は200番台とする。
これには以下の工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[200:] 内面溝計測
\item[250:] 逃し溝計測
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N300：内面溝・逃し溝加工}
内面溝および逃し溝加工を行う工程のシーケンス番号は300番台とする。
これには以下の工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[300:] 内面溝加工
\item[350:] 逃し溝加工
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N400：トップ側の加工}
トップ側の加工を行う工程のシーケンス番号は400番台とする。
これには以下の工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[400:] トップ端面加工
\item[410:] トップ外削加工
\item[420:] 溝加工
\item[430:] トップ外面取加工
\item[440:] トップ内面取加工
\item[450:] 座ぐり加工
\end{enumerate}


\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N500：ボトム側の加工}
ボトム側の加工を行う工程のシーケンス番号は500番台とする。
これには以下の工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[500:] ボトム端面加工
\item[510:] ボトム外削加工
\item[520:] ボトム外面取加工
\item[530:] ボトム内面取加工
\end{enumerate}


%\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N800：エラー\label{subsec:sequenceNerror}\TBW}
\index{エラー}エラー検出時に\index{ジャンプ}ジャンプするシーケンス番号は800番台とする。
エラーの種類（システム変数\ttNum3000の値）に応じて以下のように分類し、（概ね）\index{ブロック}プロックごとに連番とする。
\begin{enumerate}
\item[800:] \verb|#3000=121 (Argument is not assigned)|
\item[810:] \verb|#3000=...|
\item[820:] \verb|#3000=1 (Pallet Alarm)|,\\
            \verb|#3000=145 (Sensor-Low-Battery)|, \verb|#3000=146 (Sensor-Alarm)|
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N990:プログラムの終了\label{subsec:sequenceNprgEnd}}
\index{プログラムしゅうりょう@プログラム終了}プログラム終了する工程のシーケンス番号は990番台とする。
特に、プログラムの終了はN999とする。



\clearpage
\noindent
改めて上記の\index{シーケンスばんごういちらん@シーケンス番号一覧}シーケンス番号を一覧にしておく。\\
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% sequence numbers %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\addtocontents{lot}{\protect\addvspace{3pt}}{}{}
\addcontentsline{lot}{section}{\numberline{\thesection}\Sectionname}
\modcaptionof{table}{シーケンス番号 一覧}
\begin{twoCtable}{}
N001 & プログラムの始まり\\\hline
\hline
N10x & タッチセンサー計測（芯出し）\\\hline
N15x & タッチセンサー計測（通り芯$X$）\\\hline
N16x & タッチセンサー計測（通り芯$Y$）\\\hline
\hline
N20x & タッチセンサー計測（内面溝）\\\hline
N25x & タッチセンサー計測（逃し溝）\\\hline
\hline
N30x & 内面溝加工\\\hline
N35x & 逃し溝加工\\\hline
\hline
N40x & トップ端面加工\\\hline
N41x & トップ外削加工\\\hline
N42x & 溝加工\\\hline
N43x & トップ外面取加工\\\hline
N44x & トップ内面取加工\\\hline
N45x & 座ぐり加工\\\hline
\hline
N500 & ボトム端面加工\\\hline
N51x & ボトム外削加工\\\hline
N52x & ボトム外面取加工\\\hline
N53x & ボトム内面取加工\\\hline
\hline
N80x & 引数のによるエラー\\\hline
N81x\TBW & \\\hline
N82x & パレットまたはタッチセンサーによるエラー\\\hline
\hline
N99x & プログラム終了の工程\\\hline
N999\TBW & プログラム終了(\verb|M30|または\verb|M99|)
\end{twoCtable}


