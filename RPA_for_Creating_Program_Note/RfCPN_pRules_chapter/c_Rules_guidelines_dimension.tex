%!TEX root = ../RPA_for_Creating_Program_Note.tex

ここでは\index{G-code}G-codeを記述する際や、\index{ずめん@図面}図面・3Dモデルの描画をする際に必要となる、\index{すんぽう@寸法}寸法や\index{こうさ@公差}公差等の取り扱いについて触れる。

なお、前提として、特記事項等がある場合は、それを優先するものとする。
以下では主にそうした特別な記述のない、いわゆる一般的な場合について記載する。




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section A.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{基本事項}
%% paragraph %%%%%%%%%%%%%%%%%%%%%
\paragraph*{寸法公差の取扱い}\noindent
全体的に、\index{すんぽうこうさ@寸法公差}寸法公差がある場合、\index{+こうさ@$+$公差}$+$公差と\index{-こうさ@$-$公差}$-$公差の中央（平均）を見るものとする。
たとえば、$100^{+0.5}_{\phantom -0}$であれば、100.25とみなす
%% footnote %%%%%%%%%%%%%%%%%%%%%
\footnote{内面の\index{テーパひょう@テーパ表}テーパ表を見る際はこの限りではないことに注意。}。
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% paragraph %%%%%%%%%%%%%%%%%%%%%
\paragraph*{寸法の優先度}\noindent
公差のある寸法と公差のない寸法（\index{かっこすんぽう@括弧寸法}括弧寸法含む）とが共存して記載されている場合、公差のある寸法を優先する。
たとえば、2つの線の寸法がそれぞれ$12^{+0.1}_{\phantom -0}$, $4.05$と記述されていて、かつその和に相当する部分の寸法が16と記述されている場合は、16.10とみなす。




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section A.2 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{全長・振分長}
\index{ふりわけちょう@振分長}振分長の公差については、\index{ぜんちょう@全長}全長の公差を\index{トップふりわけちょう@トップ振分長}トップ振分長と\index{ボトムふりわけちょう@ボトム振分長}ボトム振分長とで等分配する。
たとえば、全長が$1000^{\phantom +0}_{-1.0}$でトップ振分長が200であれば、全長の公差分$-0.5$を等分配し、それぞれ$-0.25$, $-0.25$とする。
つまり、トップ振分長は199.75, ボトム振分長は799.75とする
%% footnote %%%%%%%%%%%%%%%%%%%%%
\footnote{\index{ふりわけちゅうしん@振分中心}振分中心からのずれとして考えると、振分長に依らず等分配するのが自然、と捉えることができる。}。
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% paragraph %%%%%%%%%%%%%%%%%%%%%
\paragraph*{括弧寸法の場合}\noindent
片方の振分長が括弧寸法の場合は、全長の公差をそのまま括弧寸法に割り当てる。
たとえば、全長が$1000^{\phantom +0}_{-1.0}$でトップ振分長が200, ボトム振分長が(800)であれば、トップ振分長は200, ボトム振分長は799.5とする。




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section A.3 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{外径}
プログラムを記述する際は、簡単のため、端面部の水平方向の長さは、モールドの\index{がいけい@外径}外径（中心湾曲と水平な方向）とみなしてもよいものとする。

実際には、\index{ちゅうしんわんきょく@中心湾曲}中心湾曲を$R$, トップ振分長を$f_\mathrm T$, 外径を$W_x$とすると、トップ端面部の水平方向の長さ$W_\mathrm T$は以下で与えられる。（ボトム端面部も同様）
\begin{align*}
  W_\mathrm T
  = \sqrt{\left(R+\frac{W_x}2\right)^{\!2}-f_\mathrm T^2}
    -\sqrt{\left(R-\frac{W_x}2\right)^{\!2}-f_\mathrm T^2}\ .
\end{align*}
\begin{Column}{近似計算}
\index{テイラーてんかい@テイラー展開}テイラー展開（\index{マクローリンてんかい@マクローリン展開}マクローリン展開）より、
\begin{align*}
  (1+x)^\frac12 = 1+\frac x2-\frac{x^2}8+\frac{x^3}{16}-\frac{5x^4}{128}+o\!\left(x^5\right)
\end{align*}
なので、
\begin{align*}
  & (1+x)^\frac12(1+y)^\frac12-(1-x)^\frac12(1-y)^\frac12\\
  &= x+y+\frac{(x+y)(x-y)^2}8-\frac{xy(x+y)\big\{5(x-y)^2+7xy\big\}}{128}+\cdots\ .
\end{align*}
したがって、
\begin{align*}
  x = \frac{\nicefrac{W_x}2+f_\mathrm T}R\ ,\quad y = \frac{\nicefrac{W_x}2-f_\mathrm T}R\quad
  \longrightarrow \quad
  x+y = \frac{W_x}R\ , \quad x-y = \frac{2f_\mathrm T}R
\end{align*}
であるので、
\begin{align*}
  W_\mathrm T
  = R\left\{(1+x)^\frac12(1+y)^\frac12-(1-x)^\frac12(1-y)^\frac12\right\}
  = W_x\!\left(1+\frac{f_\mathrm T^2}{2R^2}+\cdots\right).
\end{align*}
\end{Column}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section A.4 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{内径}
プログラムを記述する際は、簡単のため、端面部の水平方向の長さは、モールドの外径（中心湾曲と水平な方向）とみなしてもよいものとする。
これは外径（\pageautoref{sec:10.3}）と同様である。

%% paragraph %%%%%%%%%%%%%%%%%%%%%
\paragraph*{内面テーパおよびテーパ表}\noindent
\index{テーパひょう@テーパ表}テーパ表を参照する際は、全長の公差は考慮しないものとする。
また、トップ端からの距離のピッチも、同様に公差は考慮しないものとする。

たとえば、全長が$800^{+0.5}_{\phantom -0}$, トップ振分長が400, ピッチが25である場合を考える。
このとき、トップ端は振分中心から400の位置にあり、ピッチは25であるものとし、両端についてはそれを適宜延長して調整する。