%!TEX root = ../RPA_for_Creating_Program_Note.tex


一般に、\index{シーケンスばんごう@シーケンス番号}シーケンス番号は（重複していなければ）自由に付けて問題ない。
しかしこれに一定のルールを与えておくことで、\index{プログラム(G-code)}プログラムの
\begin{enumerate}
\item どの部分で何が行われているか
\item どの部分で\index{エラー}エラーが起きているか
\item 途中から稼働する場合、どの\index{ブロック}ブロックから始めればよいか
\end{enumerate}
など、作業や管理をする際に効率よく制御することが可能になる。

そこで、ここでは\index{シーケンスばんごう@シーケンス番号}シーケンス番号（\index{Nコード}Nコード）についての規則を与える。



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section 15.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{シーケンス番号の基本事項}
\begin{enumerate}[label=\Roman*), ref=\Roman*)]
\item シーケンス番号は3桁とし、0埋めする
\item プログラムの始まりのシーケンス番号は\verb|N001|とする
\item 原則として、シーケンス番号は昇順とし、特に1桁目は連番とする
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section 15.2 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{サブプログラム}
\DMname においては、原則として\index{サブプログラム}サブプログラムは始めから実行されるものであり、途中の部分から実行されることはない。
そのため、サブプログラムについてはシーケンス番号は記述の順に（概ね\index{ブロック}ブロックごとに）連番とする。

なお、エラー検出時に関するシーケンス番号、および\index{プログラムしゅうりょう@プログラム終了}プログラム終了に関するシーケンス番号については、以降で述べる\index{メインプログラム}メインプログラムのもの(\autoref{subsec:sequenceNerror}, \pageautoref{subsec:sequenceNprgEnd})と同様とする。



\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% section 15.3 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\modHeadsection{メインプログラム}
\DMname において、\index{メインプログラム}メインプログラム
%% footnote %%%%%%%%%%%%%%%%%%%%%
\footnote{ここでいうメインプログラムとは、下5桁が\index{ずめんばんごう@図面番号}図面番号と一致するものを指す。}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
は\index{さぎょうしゃ@作業者}作業者が実際に設定を変更したり、途中の箇所から始めたりし得る。
そのため、メインプログラムについては各作業（計測・加工）ごとにシーケンス番号を割り振ることにする。


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 15.3.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N100：計測（\dimple ・逃し溝以外）}
\index{タッチセンサープローブ}タッチセンサープローブを用いた計測（\dimple ・逃し溝を除く）を行う工程のシーケンス番号は100番台とする。
これには以下の\index{こうてい@工程}工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[100:] 芯出し計測
\item[650:] 通り芯$X$計測
\item[660:] 通り芯$Y$計測
\end{enumerate}


%\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 15.3.2 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N200：計測（\dimple）}
\expandafterindex{\dimplekana@\dimple}\dimple および\index{にがしみぞ@逃し溝}逃し溝に関する\index{タッチセンサープローブ}タッチセンサープローブを用いた計測を行う工程のシーケンス番号は200番台とする。
これには以下の工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[200:] \dimple 計測
\item[250:] 逃し溝計測
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N300：\dimple ・逃し溝加工}
\dimple および\index{にがしみぞかこう@逃し溝加工}逃し溝加工を行う工程のシーケンス番号は300番台とする。
これには以下の工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[300:] \dimple 加工
\item[350:] 逃し溝加工
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N400：トップ側の加工}
トップ側の加工を行う工程のシーケンス番号は400番台とする。
これには以下の工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[400:] トップ端面加工
\item[410:] トップ外削加工
\item[420:] 溝加工
\item[430:] トップ外面取加工
\item[440:] トップ内面取加工
\item[450:] 座ぐり加工
\end{enumerate}


\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N500：ボトム側の加工}
ボトム側の加工を行う工程のシーケンス番号は500番台とする。
これには以下の工程が含まれ、これらは2桁目の番号で区別される。
\begin{enumerate}
\item[500:] ボトム端面加工
\item[510:] ボトム外削加工
\item[530:] ボトム外面取加工
\item[540:] ボトム内面取加工
\end{enumerate}


%\clearpage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N800：エラー\label{subsec:sequenceNerror}\TBW}
\index{エラー}エラー検出時に\index{ジャンプ}ジャンプするシーケンス番号は800番台とする。
エラーの種類（\index{システムへんすう@システム変数}システム変数\ttNum3000の値）に応じて以下のように分類し、（概ね）\index{ブロック}プロックごとに連番とする。
\begin{enumerate}
\item[800:] \verb|#3000=121 (Argument is not assigned)|
\item[810:] \verb|#3000=...|
\item[820:] \verb|#3000=1 (Pallet Alarm)|,\\
            \verb|#3000=145 (Sensor-Low-Battery)|, \verb|#3000=146 (Sensor-Alarm)|
\end{enumerate}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% subsection 14.2.1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{N990：プログラムの終了\label{subsec:sequenceNprgEnd}}
\index{プログラムしゅうりょう@プログラム終了}プログラムを終了する工程のシーケンス番号は990番台とする。
特に、プログラムの終了はN999とする。



\clearpage
\noindent
改めて上記の\index{シーケンスばんごういちらん@シーケンス番号一覧}シーケンス番号を一覧にしておく。\\

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% sequence numbers %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{multicollongtblr}{シーケンス番号 一覧（メインプログラム）\TBW}{cX[l]}
N番号 & 内容\\
\ttfamily N001 & プログラムの始まり\\
\ttfamily N10x & タッチセンサープローブ計測（芯出し）\\
\ttfamily N20x & タッチセンサープローブ計測（\dimple）\\
\ttfamily N25x & タッチセンサープローブ計測（逃し溝）\\
\ttfamily N30x & \dimple 加工\\
\ttfamily N35x & 逃し溝加工\\
\ttfamily N40x & トップ端面加工\\
\ttfamily N41x & トップ外削加工\\
\ttfamily N42x & 溝加工\\
\ttfamily N43x & トップ外面取加工\\
\ttfamily N44x & トップ内面取加工\\
\ttfamily N45x & 座ぐり加工\\
\ttfamily N500 & ボトム端面加工\\
\ttfamily N51x & ボトム外削加工\\
\ttfamily N53x & ボトム外面取加工\\
\ttfamily N54x & ボトム内面取加工\\
\ttfamily N65x & タッチセンサープローブ計測（通り芯$X$）\\
\ttfamily N66x & タッチセンサープローブ計測（通り芯$Y$）\\
\ttfamily N80x & 引数によるエラー\\
\ttfamily N81x\TBW & \\
\ttfamily N82x & パレットまたはタッチセンサープローブによるエラー\\
\ttfamily N99x & プログラム終了の工程\\
\ttfamily N999 & プログラム終了({\ttfamily M02}または{\ttfamily M30}または{\ttfamily M99})
\end{multicollongtblr}


